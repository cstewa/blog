<h1> This is a blog. </h1>

<ul>
  <% @posts.each do |post| %>
    <li>
      <strong><%= post.title %></strong> 
      <%= post.date %>
      <%if !post.author.nil? %>
      <%= post.author.name %>
      <% end %>
      <%= post.text %>
      <%= post.tags.map {|tag| tag.text }.join(", ") %>
      <br>
      <form method="post" action="/new_comment/<%=post.id %>">
        Your Name: 
          <input type="text" name="comment[name]"> 
        <br>
        Your Comment:
          <textarea type="text" name="comment[text]"></textarea>
        <br>
        <button>Save Comment</button>
      </form>  
      <br>

      Comments: <% post.comments.each do |comment| %>
        <ul>
          <li>
            <%= comment.name %>
            <%= comment.text %>
          </li>  
        </ul>
        <%end%>
    </li>
  <% end %>
</ul>

<a href="/new_post">New Post</a>